---
title: è”æŒé—¨æˆ·é€šè¿‡å¿«æ·æŒ‡ä»¤ä¸€é”®å¼€é—¨
date: 2025-11-10 20:36:09
tags:
---


è”æŒé—¨æˆ·çš„APPåšçš„å®åœ¨å¤ªçƒ‚äº†ï¼Œæƒ³å¼€ä¸ªé—¨å…ˆå¾—ç‚¹ä¸€å †å¹¿å‘Šï¼Œäºæ˜¯ç ”ç©¶äº†ä¸€ä¸‹æ•´äº†ä¸ªä¸€é”®å¼€é—¨çš„å¿«æ·æŒ‡ä»¤ï¼Œå†™ä¸ªæ–‡æ¡£ç»™è‡ªå·±è®°å½•ä¸€ä¸‹ã€‚
å‚è€ƒäº†[v2exè¿™ä¸ªå¸–å­](https://cn.v2ex.com/t/1052764)é‡Œå¤§ä½¬ä»¬çš„å›å¤ï¼Œéå¸¸æ„Ÿè°¢ğŸ™

## æå‰å‡†å¤‡å¥½
- è”æŒé—¨æˆ·APP
- ä»»æ„å¯ä»¥æŠ“åŒ…çš„APPï¼ˆä½œä¸ºå‚è€ƒï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯Loonçš„æŠ“åŒ…åŠŸèƒ½ï¼‰

## é€šè¿‡æŠ“åŒ…è·å–å¼€é—¨API
1. å¯åŠ¨æŠ“åŒ…ï¼Œæ‰“å¼€è”æŒé—¨æˆ·APPï¼Œé‡æ–°ç™»å½•å¹¶æˆåŠŸå¼€é—¨ååœæ­¢æŠ“åŒ…ã€‚
2. åœ¨ç»“æœé‡Œæœç´¢`login`ï¼Œæ‰¾åˆ°è¿™ä¸ªAPI: `https://lzmh.lz-qs.com:6025/lzmh_app_api/api/v2/login/sms?timestamp=xxxxx&openid=&sign=xxxx`ï¼ŒæŠŠresponseé‡Œçš„`value.token`å’Œ`openid`éƒ½è®°ä¸‹æ¥ã€‚
```json
{
  "message": "å“åº”æˆåŠŸ",
  "value": {
    "token": "xxxxxx",
    "openid": "xxxxxx",
    "first_login_status": 0
  },
  "code": 10000
}
```


3. åœ¨æŠ“åŒ…ç»“æœä¸­æœç´¢`opendoor`ï¼Œæ‰¾åˆ°è¿™ä¸ªAPIï¼š`https://lzmh.lz-qs.com:6025/lzmh_app_api/api/v1/opendoor/openDoorControl?timestamp=xxx&openid={ä¸Šä¸€æ­¥æ‹¿åˆ°çš„openid}&sign=xxxxx`ï¼Œè®°å½•headerå’Œbodyã€‚
headerç¤ºä¾‹ï¼š
```
// ä¸çŸ¥é“å“ªäº›æ˜¯å¿…éœ€çš„æ€»ä¹‹å…¨æŠ„äº†
accept: */*
content-type: application/json
content-length: 303
accept-encoding: gzip, deflate, br
user-agent: LZMH/4.10.17 (iPhone; iOS 26.1; Scale/3.00)
priority: u=3, i
accept-language: zh-Hans-CN;q=1, en-CN;q=0.9, ja-CN;q=0.8
```
bodyç¤ºä¾‹ï¼š
```json
{
  "header": {
    "appCode": "202510150",
    "appVersion": "4.10.17",
    "apkName": "com.project.LZMH",
    "operator": "æœªçŸ¥",
    "netWorkType": "WiFi",
    "andModel": "iPhone 14 Pro Max",
    "type": "2",
    "sdk": "ios26.1",
    "mobile_phone": "xxxxxx"
  },
  "body": {
    "ser_num": "xxxxxxx",
    "msg_id": "xxxxx"
  }
}
```

## åˆ›å»ºå¿«æ·æŒ‡ä»¤
`opendoor` API urlä¸­çš„`sign`æ˜¯éœ€è¦å®šæœŸæ›´æ–°çš„ï¼Œä»–æ˜¯ç”±`MD5(path + timestamp + token)`å¾—åˆ°çš„ã€‚
- path: `/api/v1/opendoor/openDoorControl`
- timestamp: unixæ—¶é—´æˆ³
- token: æŠ“åŒ…è·å¾—çš„token

`opendoor` API bodyé‡Œçš„`body.ser_num`ä¸çŸ¥é“æ˜¯å•¥ï¼Œå¥½åƒä¸éœ€è¦æ”¹ï¼Œ`body.msg_id`å¯ä»¥ç”¨`timestamp - 1`çš„å€¼

æ‰€ä»¥å¿«æ·æŒ‡ä»¤é‡Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯è·å–å½“å‰æ—¶é—´æˆ³ï¼Œç”Ÿæˆsign hashå€¼ï¼Œç”Ÿæˆ`opendoor` APIå¹¶å‘é€ã€‚
å¿«æ·æŒ‡ä»¤æˆ‘éƒ½æ˜¯å‡‘åˆç”¨çš„ï¼Œå¯èƒ½æœ‰æ›´å¥½çš„åšæ³•ï¼Œå°±æ”¾ä¸ªæˆªå›¾å‚è€ƒä¸€ä¸‹æ€è·¯å§ã€‚


![å¿«æ·æŒ‡ä»¤](../images/ä¸€é”®å¼€é—¨å¿«æ·æŒ‡ä»¤.png)